"use strict";(self.webpackChunkregis_tyre_app=self.webpackChunkregis_tyre_app||[]).push([[309],{1309:(A,u,a)=>{a.r(u),a.d(u,{AuthModule:()=>y});var g=a(6895),p=a(2956),t=a(8256);let d=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-main"]],decls:4,vars:0,consts:[[1,"limiter"],[1,"container-login100",2,"background-image","url('assets/images/macback.jpg')"],[1,"wrap-login100","p-l-55","p-r-55","p-t-65","p-b-54"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet"),t.qZA()()())},dependencies:[p.lC],encapsulation:2})}return o})();var e=a(433),c=a(6743),m=a(805),h=a(529);let f=(()=>{class o{constructor(i){this.http=i,this.baseAuthUrl=c.N.baseAuthUrl}login(i,n,r){const s=localStorage.getItem("origin")+this.baseAuthUrl+"/auth/login",l={codUsuario:i,password:n,tenantId:r};return console.log("AuthService:",s,i,r),this.http.post(s,l)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(h.eN))};static#o=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Z=a(4044);const v=[{path:"",component:d,children:[{path:"login",component:(()=>{class o{constructor(i,n,r,s){this.fb=i,this.router=n,this.authService=r,this.messageService=s,this.originConfig=c.N.origin,this.miFormulario=this.fb.group({codUsuario:["",[e.kI.required,e.kI.min(8)]],password:["",[e.kI.required,e.kI.minLength(6)]],ruc:["",[e.kI.required,e.kI.minLength(11),e.kI.min(11)]]})}ngOnInit(){if("dynamic"==this.originConfig){const{origin:i}=window.location;localStorage.setItem("origin",i)}else localStorage.setItem("origin",this.originConfig)}login(){const{codUsuario:i,password:n,ruc:r}=this.miFormulario.value;this.authService.login(i,n,r).subscribe({next:s=>{s.ok?(localStorage.setItem("tenantId",s.tenantId),localStorage.setItem("codUsuario",s.codUsuario),this.router.navigateByUrl("/dashboard")):this.messageService.add({severity:"warn",summary:"Problemas",detail:"Login fallido ."+JSON.stringify(s.msg)})},error:s=>{try{this.messageService.add({severity:"error",summary:"Problemas",detail:"Login fallido :"+s.error.msg})}catch{}}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(e.qu),t.Y36(p.F0),t.Y36(f),t.Y36(m.ez))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],features:[t._Bn([m.ez])],decls:25,vars:2,consts:[["autocomplete","off",1,"login100-form",3,"formGroup","ngSubmit"],[1,"login100-form-title","p-b-49"],[1,"wrap-input100","m-b-23"],[1,"label-input100"],["type","text","formControlName","ruc","placeholder","RUC",1,"input100"],[1,"focus-input100"],["type","text","formControlName","codUsuario","placeholder","C\xf3digo de Usario",1,"input100"],[1,"wrap-input100"],["type","password","formControlName","password","placeholder","Contrase\xf1a",1,"input100"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"]],template:function(n,r){1&n&&(t._UZ(0,"p-toast"),t.TgZ(1,"form",0),t.NdJ("ngSubmit",function(){return r.login()}),t.TgZ(2,"span",1),t._uU(3," Login "),t.qZA(),t.TgZ(4,"div",2)(5,"span",3),t._uU(6,"RUC"),t.qZA(),t._UZ(7,"input",4)(8,"span",5),t.qZA(),t.TgZ(9,"div",2)(10,"span",3),t._uU(11,"User"),t.qZA(),t._UZ(12,"input",6)(13,"span",5),t.qZA(),t.TgZ(14,"div",7)(15,"span",3),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8)(18,"span",5),t.qZA(),t._UZ(19,"div",9),t.TgZ(20,"div",10)(21,"div",11),t._UZ(22,"div",12),t.TgZ(23,"button",13),t._uU(24," Login "),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",r.miFormulario),t.xp6(22),t.Q6J("disabled",r.miFormulario.invalid))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,Z.FN],encapsulation:2})}return o})()},{path:"registro",component:(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],decls:29,vars:0,consts:[["autocomplete","off",1,"login100-form"],[1,"login100-form-title","p-b-49"],[1,"wrap-input100","m-b-23"],[1,"label-input100"],["type","nombre","name","nombre","placeholder","Ingrese su nombre",1,"input100"],[1,"focus-input100"],["type","email","name","email","placeholder","Ingrese su email",1,"input100"],[1,"wrap-input100"],["type","password","name","password","placeholder","Ingrese su contrase\xf1a",1,"input100"],[1,"text-right","p-t-8","p-b-31"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],[1,"login100-form-btn"],[1,"flex-col-c","p-t-60"],[1,"txt1","p-b-17"],["routerLink","/auth/login",1,"txt2"]],template:function(n,r){1&n&&(t.TgZ(0,"form",0)(1,"span",1),t._uU(2," Nuevo Usuario "),t.qZA(),t.TgZ(3,"div",2)(4,"span",3),t._uU(5,"Nombre"),t.qZA(),t._UZ(6,"input",4)(7,"span",5),t.qZA(),t.TgZ(8,"div",2)(9,"span",3),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",6)(12,"span",5),t.qZA(),t.TgZ(13,"div",7)(14,"span",3),t._uU(15,"Password"),t.qZA(),t._UZ(16,"input",8)(17,"span",5),t.qZA(),t._UZ(18,"div",9),t.TgZ(19,"div",10)(20,"div",11),t._UZ(21,"div",12),t.TgZ(22,"button",13),t._uU(23," Registro "),t.qZA()()(),t.TgZ(24,"div",14)(25,"span",15),t._uU(26," \xbfYa tienes cuenta? "),t.qZA(),t.TgZ(27,"a",16),t._uU(28," Ingresa aqu\xed "),t.qZA()()())},dependencies:[p.rH,e._Y,e.JL],encapsulation:2})}return o})()},{path:"**",redirectTo:"login"}]}];let U=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(v),p.Bz]})}return o})();var b=a(4458);let y=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[g.ez,U,e.UX,b.W]})}return o})()}}]);